{"ast":null,"code":"// @ts-nocheck\nimport{MSG,RATING}from'../../constants/star-rating';import{$}from'../../utils/star-rating';import Star from'./Star';class Rating{constructor(_number){this.init=()=>{this.render();this.createStar(this.number);this.setEvents();};this.render=()=>{const rating=$('.rating');rating===null||rating===void 0?void 0:rating.insertAdjacentHTML('beforeend',this.createHTML());};this.createHTML=()=>{return\"<h1>\".concat(MSG.GUIDANCE,\"</h1>\\n      <div class='stars'></div>\\n      <span class='rating-msg'></span>\\n      \");};this.createStar=number=>{for(let index=0;index<number;index+=1){const star=new Star(index,RATING.INIT.value,this.setRating);star.init();this.stars.push(star);}};this.setEvents=()=>{this.setMouseLeaveEvent();};this.setMouseLeaveEvent=()=>{const stars=$('.stars');stars===null||stars===void 0?void 0:stars.addEventListener('mouseleave',()=>this.updateStars(this.rating));};this.setRating=newValue=>{this.rating=newValue;this.updateStars(newValue);this.renderRatingMsg(newValue);};this.renderRatingMsg=rating=>{const ratingMsg=$('.rating-msg');if(!ratingMsg)return;ratingMsg.textContent=MSG.RATING[Math.ceil(rating)];};this.calcStarValue=(rating,index)=>{const totalOnStarNum=Math.ceil(rating);if(index===totalOnStarNum&&!Number.isInteger(rating)){return RATING.HALF.value;}return index<=totalOnStarNum?RATING.ON.value:RATING.INIT.value;};this.updateStars=rating=>{for(let index=0;index<this.number;index+=1){const value=this.calcStarValue(rating,index+1);this.stars[index].updateState(value);}};this.number=_number;this.rating=RATING.INIT.value;this.stars=[];}}export default Rating;","map":{"version":3,"names":["MSG","RATING","$","Star","Rating","constructor","number","init","render","createStar","setEvents","rating","insertAdjacentHTML","createHTML","concat","GUIDANCE","index","star","INIT","value","setRating","stars","push","setMouseLeaveEvent","addEventListener","updateStars","newValue","renderRatingMsg","ratingMsg","textContent","Math","ceil","calcStarValue","totalOnStarNum","Number","isInteger","HALF","ON","updateState"],"sources":["/home/runner/work/challenges/challenges/src/components/star-rating/Rating.js"],"sourcesContent":["// @ts-nocheck\nimport { MSG, RATING } from '../../constants/star-rating';\nimport { $ } from '../../utils/star-rating';\nimport Star from './Star';\n\nclass Rating {\n  constructor(number) {\n    this.number = number;\n    this.rating = RATING.INIT.value;\n    this.stars = [];\n  }\n\n  init = () => {\n    this.render();\n    this.createStar(this.number);\n    this.setEvents();\n  };\n\n  render = () => {\n    const rating = $('.rating');\n    rating?.insertAdjacentHTML('beforeend', this.createHTML());\n  };\n\n  createHTML = () => {\n    return `<h1>${MSG.GUIDANCE}</h1>\n      <div class='stars'></div>\n      <span class='rating-msg'></span>\n      `;\n  };\n\n  createStar = (number) => {\n    for (let index = 0; index < number; index += 1) {\n      const star = new Star(index, RATING.INIT.value, this.setRating);\n      star.init();\n      this.stars.push(star);\n    }\n  };\n\n  setEvents = () => {\n    this.setMouseLeaveEvent();\n  };\n\n  setMouseLeaveEvent = () => {\n    const stars = $('.stars');\n    stars?.addEventListener('mouseleave', () => this.updateStars(this.rating));\n  };\n\n  setRating = (newValue) => {\n    this.rating = newValue;\n    this.updateStars(newValue);\n    this.renderRatingMsg(newValue);\n  };\n\n  renderRatingMsg = (rating) => {\n    const ratingMsg = $('.rating-msg');\n    if (!ratingMsg) return;\n    ratingMsg.textContent = MSG.RATING[Math.ceil(rating)];\n  };\n\n  calcStarValue = (rating, index) => {\n    const totalOnStarNum = Math.ceil(rating);\n    if (index === totalOnStarNum && !Number.isInteger(rating)) {\n      return RATING.HALF.value;\n    }\n    return index <= totalOnStarNum ? RATING.ON.value : RATING.INIT.value;\n  };\n\n  updateStars = (rating) => {\n    for (let index = 0; index < this.number; index += 1) {\n      const value = this.calcStarValue(rating, index + 1);\n      this.stars[index].updateState(value);\n    }\n  };\n}\n\nexport default Rating;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
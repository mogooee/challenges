{"ast":null,"code":"// @ts-nocheck\nimport{RATING}from'../../constants/star-rating';import{$,$$}from'../../utils/star-rating';export class Star{constructor(index,_value,setValue){this.init=()=>{this.render();this.setEvents();};this.render=()=>{const rating=$('.stars');rating===null||rating===void 0?void 0:rating.insertAdjacentHTML('beforeend',this.createHTML());};this.createHTML=()=>{const state=this.value===RATING.INIT.value?RATING.INIT.class:RATING.HALF.value?RATING.HALF.class:RATING.ON.class;return\"<button id='star-\".concat(this.index,\"' class='star \").concat(state,\"'></button>\");};this.setEvents=()=>{var _this$target,_this$target2;this.setTarget();(_this$target=this.target)===null||_this$target===void 0?void 0:_this$target.addEventListener('mousemove',this.colorStar);(_this$target2=this.target)===null||_this$target2===void 0?void 0:_this$target2.addEventListener('click',this.setRating);};this.setTarget=()=>{const star=$(\"#star-\".concat(this.index));this.target=star;};this.noHighlightStar=starElemnt=>{starElemnt.classList.remove('half','on');};this.highlightHalfStar=starElement=>{starElement.classList.add('half');starElement.classList.remove('on');};this.highlightStar=starElement=>{starElement.classList.add('on');starElement.classList.remove('half');};this.colorStar=event=>{const stars=$$('.star');for(let i=0;i<stars.length;i+=1){if(i<=this.index){if(i===this.index&&event.offsetX<event.currentTarget.offsetWidth/2){this.highlightHalfStar(stars[i]);continue;}this.highlightStar(stars[i]);}else{this.noHighlightStar(stars[i]);}}};this.setRating=()=>{var _this$target3,_this$target4;if((_this$target3=this.target)!==null&&_this$target3!==void 0&&_this$target3.classList.contains(RATING.HALF.class)){this.setValue(this.index+RATING.HALF.value);return;}if((_this$target4=this.target)!==null&&_this$target4!==void 0&&_this$target4.classList.contains(RATING.ON.class)){this.setValue(this.index+RATING.ON.value);}};this.updateState=value=>{if(value===RATING.ON.value){this.highlightStar(this.target);return;}if(value===RATING.HALF.value){this.highlightHalfStar(this.target);return;}this.noHighlightStar(this.target);};this.index=index;this.value=_value;this.setValue=setValue;}}export default Star;","map":{"version":3,"names":["RATING","$","$$","Star","constructor","index","value","setValue","init","render","setEvents","rating","insertAdjacentHTML","createHTML","state","INIT","class","HALF","ON","concat","_this$target","_this$target2","setTarget","target","addEventListener","colorStar","setRating","star","noHighlightStar","starElemnt","classList","remove","highlightHalfStar","starElement","add","highlightStar","event","stars","i","length","offsetX","currentTarget","offsetWidth","_this$target3","_this$target4","contains","updateState"],"sources":["/home/runner/work/challenges/challenges/src/components/star-rating/Star.js"],"sourcesContent":["// @ts-nocheck\nimport { RATING } from '../../constants/star-rating';\nimport { $, $$ } from '../../utils/star-rating';\n\nexport class Star {\n  constructor(index, value, setValue) {\n    this.index = index;\n    this.value = value;\n    this.setValue = setValue;\n  }\n\n  init = () => {\n    this.render();\n    this.setEvents();\n  };\n\n  render = () => {\n    const rating = $('.stars');\n    rating?.insertAdjacentHTML('beforeend', this.createHTML());\n  };\n\n  createHTML = () => {\n    const state =\n      this.value === RATING.INIT.value ? RATING.INIT.class : RATING.HALF.value ? RATING.HALF.class : RATING.ON.class;\n    return `<button id='star-${this.index}' class='star ${state}'></button>`;\n  };\n\n  setEvents = () => {\n    this.setTarget();\n    this.target?.addEventListener('mousemove', this.colorStar);\n    this.target?.addEventListener('click', this.setRating);\n  };\n\n  setTarget = () => {\n    const star = $(`#star-${this.index}`);\n    this.target = star;\n  };\n\n  noHighlightStar = (starElemnt) => {\n    starElemnt.classList.remove('half', 'on');\n  };\n\n  highlightHalfStar = (starElement) => {\n    starElement.classList.add('half');\n    starElement.classList.remove('on');\n  };\n\n  highlightStar = (starElement) => {\n    starElement.classList.add('on');\n    starElement.classList.remove('half');\n  };\n\n  colorStar = (event) => {\n    const stars = $$('.star');\n    for (let i = 0; i < stars.length; i += 1) {\n      if (i <= this.index) {\n        if (i === this.index && event.offsetX < event.currentTarget.offsetWidth / 2) {\n          this.highlightHalfStar(stars[i]);\n          continue;\n        }\n        this.highlightStar(stars[i]);\n      } else {\n        this.noHighlightStar(stars[i]);\n      }\n    }\n  };\n\n  setRating = () => {\n    if (this.target?.classList.contains(RATING.HALF.class)) {\n      this.setValue(this.index + RATING.HALF.value);\n      return;\n    }\n\n    if (this.target?.classList.contains(RATING.ON.class)) {\n      this.setValue(this.index + RATING.ON.value);\n    }\n  };\n\n  updateState = (value) => {\n    if (value === RATING.ON.value) {\n      this.highlightStar(this.target);\n      return;\n    }\n    if (value === RATING.HALF.value) {\n      this.highlightHalfStar(this.target);\n      return;\n    }\n\n    this.noHighlightStar(this.target);\n  };\n}\n\nexport default Star;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
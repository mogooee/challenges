{"ast":null,"code":"import{$}from'../../utils/notification';import*as icon from'../../assets/toast-notification/icons';import{ANIMATION_DELAY,PROGRESS}from'../../constants/notification';class Notification{constructor(type,message,autoTimer){this.type=void 0;this.message=void 0;this.autoTimer=void 0;this.progressValue=PROGRESS.INIT_VALUE;this.target=null;this.progressDOM=null;this.timer={progressBar:null,animation:null,remover:null};this.init=()=>{this.render();this.setEvents();};this.render=()=>{var _$;(_$=$('.stack'))===null||_$===void 0?void 0:_$.insertAdjacentHTML('afterbegin',this.template());setTimeout(()=>{var _this$target;(_this$target=this.target)===null||_this$target===void 0?void 0:_this$target.classList.add('on');});};this.template=()=>{return\"<div class='notification' data-type=\".concat(this.type,\">\\n              <img src=\").concat(icon[this.type],\"/>\\n              <span>\").concat(this.message,\"</span>\\n              <button class='cancel-btn'>\\n                <img src=\").concat(icon.cancel,\" />\\n              </button>\\n              <progress value=\\\"\").concat(PROGRESS.MAX_VALUE,\"\\\"\\n               max=\\\"\").concat(PROGRESS.MAX_VALUE,\"\\\"></progress>\\n           </div>\");};this.setEvents=()=>{var _this$target2,_this$target3;this.setTarget();this.setAutoTimer('PLAY');(_this$target2=this.target)===null||_this$target2===void 0?void 0:_this$target2.addEventListener('mouseenter',()=>{this.setAutoTimer('STOP');});(_this$target3=this.target)===null||_this$target3===void 0?void 0:_this$target3.addEventListener('mouseleave',()=>{this.setAutoTimer('PLAY');});};this.setTarget=()=>{this.target=$('.notification');};this.setAutoTimer=mode=>{if(mode==='PLAY'){const autoTime=this.autoTimer-this.progressValue*PROGRESS.TIMER;this.setProgressBar();this.timer.animation=setTimeout(()=>{var _this$target4;this.progressDOM.value=PROGRESS.INIT_VALUE;clearInterval(this.timer.progressBar);(_this$target4=this.target)===null||_this$target4===void 0?void 0:_this$target4.classList.remove('on');},autoTime);this.timer.remover=setTimeout(()=>{var _this$target5;(_this$target5=this.target)===null||_this$target5===void 0?void 0:_this$target5.remove();},autoTime+ANIMATION_DELAY);return;}clearInterval(this.timer.progressBar);clearTimeout(this.timer.animation);clearTimeout(this.timer.remover);};this.setProgressBar=()=>{var _this$target6;this.progressDOM=(_this$target6=this.target)===null||_this$target6===void 0?void 0:_this$target6.querySelector('progress');this.timer.progressBar=setInterval(()=>{const rate=this.progressValue/(this.autoTimer/PROGRESS.TIMER);this.progressDOM.value=PROGRESS.MAX_VALUE-rate;this.progressValue+=1;},PROGRESS.TIMER);};this.type=type;this.message=message;this.autoTimer=autoTimer;}}export default Notification;","map":{"version":3,"names":["$","icon","ANIMATION_DELAY","PROGRESS","Notification","constructor","type","message","autoTimer","progressValue","INIT_VALUE","target","progressDOM","timer","progressBar","animation","remover","init","render","setEvents","_$","insertAdjacentHTML","template","setTimeout","_this$target","classList","add","concat","cancel","MAX_VALUE","_this$target2","_this$target3","setTarget","setAutoTimer","addEventListener","mode","autoTime","TIMER","setProgressBar","_this$target4","value","clearInterval","remove","_this$target5","clearTimeout","_this$target6","querySelector","setInterval","rate"],"sources":["/home/runner/work/challenges/challenges/src/components/notification/Notification.ts"],"sourcesContent":["import { $ } from '../../utils/notification';\nimport * as icon from '../../assets/toast-notification/icons';\nimport { ANIMATION_DELAY, NotificationType, PROGRESS, Timer, TimerMode } from '../../constants/notification';\n\nclass Notification {\n  type: NotificationType;\n\n  message: string;\n\n  autoTimer: number;\n\n  progressValue: number = PROGRESS.INIT_VALUE;\n\n  target: HTMLDivElement | null = null;\n\n  progressDOM: HTMLProgressElement | null = null;\n\n  timer: Timer = { progressBar: null, animation: null, remover: null };\n\n  constructor(type: NotificationType, message: string, autoTimer: number) {\n    this.type = type;\n    this.message = message;\n    this.autoTimer = autoTimer;\n  }\n\n  init = () => {\n    this.render();\n    this.setEvents();\n  };\n\n  render = () => {\n    $('.stack')?.insertAdjacentHTML('afterbegin', this.template());\n    setTimeout(() => {\n      this.target?.classList.add('on');\n    });\n  };\n\n  template = () => {\n    return `<div class='notification' data-type=${this.type}>\n              <img src=${icon[this.type]}/>\n              <span>${this.message}</span>\n              <button class='cancel-btn'>\n                <img src=${icon.cancel} />\n              </button>\n              <progress value=\"${PROGRESS.MAX_VALUE}\"\n               max=\"${PROGRESS.MAX_VALUE}\"></progress>\n           </div>`;\n  };\n\n  setEvents = () => {\n    this.setTarget();\n    this.setAutoTimer('PLAY');\n    this.target?.addEventListener('mouseenter', () => {\n      this.setAutoTimer('STOP');\n    });\n    this.target?.addEventListener('mouseleave', () => {\n      this.setAutoTimer('PLAY');\n    });\n  };\n\n  setTarget = () => {\n    this.target = $('.notification') as HTMLDivElement;\n  };\n\n  setAutoTimer = (mode: TimerMode) => {\n    if (mode === 'PLAY') {\n      const autoTime = this.autoTimer - this.progressValue * PROGRESS.TIMER;\n      this.setProgressBar();\n      this.timer.animation = setTimeout(() => {\n        this.progressDOM!.value = PROGRESS.INIT_VALUE;\n        clearInterval(this.timer.progressBar!);\n        this.target?.classList.remove('on');\n      }, autoTime);\n      this.timer.remover = setTimeout(() => {\n        this.target?.remove();\n      }, autoTime + ANIMATION_DELAY);\n      return;\n    }\n\n    clearInterval(this.timer.progressBar!);\n    clearTimeout(this.timer.animation!);\n    clearTimeout(this.timer.remover!);\n  };\n\n  setProgressBar = () => {\n    this.progressDOM = this.target?.querySelector('progress') as HTMLProgressElement;\n    this.timer.progressBar = setInterval(() => {\n      const rate = this.progressValue / (this.autoTimer / PROGRESS.TIMER);\n      this.progressDOM!.value = PROGRESS.MAX_VALUE - rate;\n      this.progressValue += 1;\n    }, PROGRESS.TIMER);\n  };\n}\n\nexport default Notification;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
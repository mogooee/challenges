{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/runner/work/challenges/challenges/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import{useState,useEffect}from'react';import styled from'styled-components';import PostItMaker from'../components/post-it/PostItMaker';import PostIt from'../components/post-it/PostIt';import useDragAndDrop from'../hooks/post-it/useDragAndDrop';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LayOut=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100%;\\n\\n  button {\\n    border: none;\\n    background-color: transparent;\\n    cursor: pointer;\\n  }\\n\\n  .App {\\n    display: flex;\\n    flex-direction: column;\\n    padding: 8px;\\n    height: 100%;\\n  }\\n\"])));const MemoBoard=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin-top: 10px;\\n  border-radius: 16px;\\n  height: inherit;\\n  background-color: #eee;\\n  position: relative;\\n\"])));export const getHighestIndex=postIts=>{const highestIndex=Math.max(...postIts.map(e=>e.index));return highestIndex+1;};const getInitPostIts=()=>{const localStorage=window.localStorage.getItem('post-it');const initPostIts=JSON.parse(localStorage);return initPostIts;};const setLocalStorage=postIts=>{window.localStorage.setItem('post-it',JSON.stringify(postIts,null,2));};const App=()=>{const initPostIts=getInitPostIts();const[postIts,setPostIts]=useState(initPostIts||[]);const setZIndex=index=>{setPostIts(prev=>prev.map(e=>{if(e.index===index){return{...e,index:getHighestIndex(prev)};}return e;}));};const handlePostItMouseDown=_ref=>{let{target}=_ref;const element=target;const postIt=element.closest('.post-it');if(!postIt)return;setZIndex(Number(postIt.dataset.index));};const setNewPos=(target,deltaPos)=>{const index=Number(target.dataset.index);setPostIts(prev=>{return prev.map(e=>{if(e.index===index){const x=e.$position.x+deltaPos.x;const y=e.$position.y+deltaPos.y;return{...e,$position:{x,y}};}return e;});});};const{dragStart,drag,dragOver,dragLeave,drop,dragEnd}=useDragAndDrop(setNewPos);const deletePostIt=index=>{setPostIts(prev=>prev.filter(e=>e.index!==index));};const setPostItContent=(index,content)=>{setPostIts(prev=>prev.map(e=>{if(e.index===index){return{...e,content};}return e;}));};useEffect(()=>{setLocalStorage(postIts);},[postIts]);return/*#__PURE__*/_jsx(LayOut,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(PostItMaker,{setPostIts:setPostIts}),/*#__PURE__*/_jsx(MemoBoard,{className:\"memo-board\",onMouseDown:handlePostItMouseDown,onDragStart:dragStart,onDrag:drag,onDragOver:dragOver,onDragLeave:dragLeave,onDrop:drop,onDragEnd:dragEnd,children:postIts.map(_ref2=>{let{index,color,$position,content,createdAt}=_ref2;return/*#__PURE__*/_jsx(PostIt,{index:index,color:color,$position:$position,content:content,createdAt:createdAt,setPostItContent:setPostItContent,deletePostIt:deletePostIt},createdAt);})})]})});};export default App;","map":{"version":3,"names":["useState","useEffect","styled","PostItMaker","PostIt","useDragAndDrop","jsx","_jsx","jsxs","_jsxs","LayOut","div","_templateObject","_taggedTemplateLiteral","MemoBoard","_templateObject2","getHighestIndex","postIts","highestIndex","Math","max","map","e","index","getInitPostIts","localStorage","window","getItem","initPostIts","JSON","parse","setLocalStorage","setItem","stringify","App","setPostIts","setZIndex","prev","handlePostItMouseDown","_ref","target","element","postIt","closest","Number","dataset","setNewPos","deltaPos","x","$position","y","dragStart","drag","dragOver","dragLeave","drop","dragEnd","deletePostIt","filter","setPostItContent","content","children","className","onMouseDown","onDragStart","onDrag","onDragOver","onDragLeave","onDrop","onDragEnd","_ref2","color","createdAt"],"sources":["/home/runner/work/challenges/challenges/src/pages/PostIt.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport PostItMaker from '../components/post-it/PostItMaker';\nimport PostIt, { PostItProps } from '../components/post-it/PostIt';\nimport useDragAndDrop, { Position } from '../hooks/post-it/useDragAndDrop';\n\nconst LayOut = styled.div`\n  width: 100%;\n  height: 100%;\n\n  button {\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n  }\n\n  .App {\n    display: flex;\n    flex-direction: column;\n    padding: 8px;\n    height: 100%;\n  }\n`;\n\nconst MemoBoard = styled.div`\n  margin-top: 10px;\n  border-radius: 16px;\n  height: inherit;\n  background-color: #eee;\n  position: relative;\n`;\n\nexport const getHighestIndex = (postIts: PostItProps[]): number => {\n  const highestIndex = Math.max(...postIts.map((e) => e.index));\n  return highestIndex + 1;\n};\n\nconst getInitPostIts = () => {\n  const localStorage = window.localStorage.getItem('post-it');\n  const initPostIts: PostItProps[] = JSON.parse(localStorage!);\n  return initPostIts;\n};\n\nconst setLocalStorage = (postIts: PostItProps[]) => {\n  window.localStorage.setItem('post-it', JSON.stringify(postIts, null, 2));\n};\n\nconst App = () => {\n  const initPostIts = getInitPostIts();\n  const [postIts, setPostIts] = useState<PostItProps[]>(initPostIts || []);\n\n  const setZIndex = (index: number) => {\n    setPostIts((prev) =>\n      prev.map((e) => {\n        if (e.index === index) {\n          return { ...e, index: getHighestIndex(prev) };\n        }\n        return e;\n      }),\n    );\n  };\n\n  const handlePostItMouseDown = ({ target }: { target: EventTarget }) => {\n    const element = target as HTMLElement;\n    const postIt = element.closest('.post-it') as HTMLDivElement;\n    if (!postIt) return;\n    setZIndex(Number(postIt.dataset.index));\n  };\n\n  const setNewPos = (target: HTMLElement, deltaPos: Position) => {\n    const index = Number(target.dataset.index);\n    setPostIts((prev) => {\n      return prev.map((e) => {\n        if (e.index === index) {\n          const x = e.$position.x + deltaPos.x;\n          const y = e.$position.y + deltaPos.y;\n          return { ...e, $position: { x, y } };\n        }\n        return e;\n      });\n    });\n  };\n\n  const { dragStart, drag, dragOver, dragLeave, drop, dragEnd } = useDragAndDrop(setNewPos);\n\n  const deletePostIt = (index: number) => {\n    setPostIts((prev) => prev.filter((e) => e.index !== index));\n  };\n\n  const setPostItContent = (index: number, content: string) => {\n    setPostIts((prev) =>\n      prev.map((e) => {\n        if (e.index === index) {\n          return { ...e, content };\n        }\n        return e;\n      }),\n    );\n  };\n\n  useEffect(() => {\n    setLocalStorage(postIts);\n  }, [postIts]);\n\n  return (\n    <LayOut>\n      <div className=\"App\">\n        <PostItMaker setPostIts={setPostIts} />\n        <MemoBoard\n          className=\"memo-board\"\n          onMouseDown={handlePostItMouseDown}\n          onDragStart={dragStart}\n          onDrag={drag}\n          onDragOver={dragOver}\n          onDragLeave={dragLeave}\n          onDrop={drop}\n          onDragEnd={dragEnd}\n        >\n          {postIts.map(({ index, color, $position, content, createdAt }) => (\n            <PostIt\n              key={createdAt}\n              index={index}\n              color={color}\n              $position={$position}\n              content={content}\n              createdAt={createdAt}\n              setPostItContent={setPostItContent}\n              deletePostIt={deletePostIt}\n            />\n          ))}\n        </MemoBoard>\n      </div>\n    </LayOut>\n  );\n};\n\nexport default App;\n"],"mappings":"kLAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,MAAO,CAAAC,WAAW,KAAM,mCAAmC,CAC3D,MAAO,CAAAC,MAAM,KAAuB,8BAA8B,CAClE,MAAO,CAAAC,cAAc,KAAoB,iCAAiC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3E,KAAM,CAAAC,MAAM,CAAGR,MAAM,CAACS,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,mPAgBxB,CAED,KAAM,CAAAC,SAAS,CAAGZ,MAAM,CAACS,GAAG,CAAAI,gBAAA,GAAAA,gBAAA,CAAAF,sBAAA,6HAM3B,CAED,MAAO,MAAM,CAAAG,eAAe,CAAIC,OAAsB,EAAa,CACjE,KAAM,CAAAC,YAAY,CAAGC,IAAI,CAACC,GAAG,CAAC,GAAGH,OAAO,CAACI,GAAG,CAAEC,CAAC,EAAKA,CAAC,CAACC,KAAK,CAAC,CAAC,CAC7D,MAAO,CAAAL,YAAY,CAAG,CAAC,CACzB,CAAC,CAED,KAAM,CAAAM,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,YAAY,CAAGC,MAAM,CAACD,YAAY,CAACE,OAAO,CAAC,SAAS,CAAC,CAC3D,KAAM,CAAAC,WAA0B,CAAGC,IAAI,CAACC,KAAK,CAACL,YAAa,CAAC,CAC5D,MAAO,CAAAG,WAAW,CACpB,CAAC,CAED,KAAM,CAAAG,eAAe,CAAId,OAAsB,EAAK,CAClDS,MAAM,CAACD,YAAY,CAACO,OAAO,CAAC,SAAS,CAAEH,IAAI,CAACI,SAAS,CAAChB,OAAO,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAC1E,CAAC,CAED,KAAM,CAAAiB,GAAG,CAAGA,CAAA,GAAM,CAChB,KAAM,CAAAN,WAAW,CAAGJ,cAAc,CAAC,CAAC,CACpC,KAAM,CAACP,OAAO,CAAEkB,UAAU,CAAC,CAAGnC,QAAQ,CAAgB4B,WAAW,EAAI,EAAE,CAAC,CAExE,KAAM,CAAAQ,SAAS,CAAIb,KAAa,EAAK,CACnCY,UAAU,CAAEE,IAAI,EACdA,IAAI,CAAChB,GAAG,CAAEC,CAAC,EAAK,CACd,GAAIA,CAAC,CAACC,KAAK,GAAKA,KAAK,CAAE,CACrB,MAAO,CAAE,GAAGD,CAAC,CAAEC,KAAK,CAAEP,eAAe,CAACqB,IAAI,CAAE,CAAC,CAC/C,CACA,MAAO,CAAAf,CAAC,CACV,CAAC,CACH,CAAC,CACH,CAAC,CAED,KAAM,CAAAgB,qBAAqB,CAAGC,IAAA,EAAyC,IAAxC,CAAEC,MAAgC,CAAC,CAAAD,IAAA,CAChE,KAAM,CAAAE,OAAO,CAAGD,MAAqB,CACrC,KAAM,CAAAE,MAAM,CAAGD,OAAO,CAACE,OAAO,CAAC,UAAU,CAAmB,CAC5D,GAAI,CAACD,MAAM,CAAE,OACbN,SAAS,CAACQ,MAAM,CAACF,MAAM,CAACG,OAAO,CAACtB,KAAK,CAAC,CAAC,CACzC,CAAC,CAED,KAAM,CAAAuB,SAAS,CAAGA,CAACN,MAAmB,CAAEO,QAAkB,GAAK,CAC7D,KAAM,CAAAxB,KAAK,CAAGqB,MAAM,CAACJ,MAAM,CAACK,OAAO,CAACtB,KAAK,CAAC,CAC1CY,UAAU,CAAEE,IAAI,EAAK,CACnB,MAAO,CAAAA,IAAI,CAAChB,GAAG,CAAEC,CAAC,EAAK,CACrB,GAAIA,CAAC,CAACC,KAAK,GAAKA,KAAK,CAAE,CACrB,KAAM,CAAAyB,CAAC,CAAG1B,CAAC,CAAC2B,SAAS,CAACD,CAAC,CAAGD,QAAQ,CAACC,CAAC,CACpC,KAAM,CAAAE,CAAC,CAAG5B,CAAC,CAAC2B,SAAS,CAACC,CAAC,CAAGH,QAAQ,CAACG,CAAC,CACpC,MAAO,CAAE,GAAG5B,CAAC,CAAE2B,SAAS,CAAE,CAAED,CAAC,CAAEE,CAAE,CAAE,CAAC,CACtC,CACA,MAAO,CAAA5B,CAAC,CACV,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAE6B,SAAS,CAAEC,IAAI,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAGnD,cAAc,CAACyC,SAAS,CAAC,CAEzF,KAAM,CAAAW,YAAY,CAAIlC,KAAa,EAAK,CACtCY,UAAU,CAAEE,IAAI,EAAKA,IAAI,CAACqB,MAAM,CAAEpC,CAAC,EAAKA,CAAC,CAACC,KAAK,GAAKA,KAAK,CAAC,CAAC,CAC7D,CAAC,CAED,KAAM,CAAAoC,gBAAgB,CAAGA,CAACpC,KAAa,CAAEqC,OAAe,GAAK,CAC3DzB,UAAU,CAAEE,IAAI,EACdA,IAAI,CAAChB,GAAG,CAAEC,CAAC,EAAK,CACd,GAAIA,CAAC,CAACC,KAAK,GAAKA,KAAK,CAAE,CACrB,MAAO,CAAE,GAAGD,CAAC,CAAEsC,OAAQ,CAAC,CAC1B,CACA,MAAO,CAAAtC,CAAC,CACV,CAAC,CACH,CAAC,CACH,CAAC,CAEDrB,SAAS,CAAC,IAAM,CACd8B,eAAe,CAACd,OAAO,CAAC,CAC1B,CAAC,CAAE,CAACA,OAAO,CAAC,CAAC,CAEb,mBACEV,IAAA,CAACG,MAAM,EAAAmD,QAAA,cACLpD,KAAA,QAAKqD,SAAS,CAAC,KAAK,CAAAD,QAAA,eAClBtD,IAAA,CAACJ,WAAW,EAACgC,UAAU,CAAEA,UAAW,CAAE,CAAC,cACvC5B,IAAA,CAACO,SAAS,EACRgD,SAAS,CAAC,YAAY,CACtBC,WAAW,CAAEzB,qBAAsB,CACnC0B,WAAW,CAAEb,SAAU,CACvBc,MAAM,CAAEb,IAAK,CACbc,UAAU,CAAEb,QAAS,CACrBc,WAAW,CAAEb,SAAU,CACvBc,MAAM,CAAEb,IAAK,CACbc,SAAS,CAAEb,OAAQ,CAAAK,QAAA,CAElB5C,OAAO,CAACI,GAAG,CAACiD,KAAA,MAAC,CAAE/C,KAAK,CAAEgD,KAAK,CAAEtB,SAAS,CAAEW,OAAO,CAAEY,SAAU,CAAC,CAAAF,KAAA,oBAC3D/D,IAAA,CAACH,MAAM,EAELmB,KAAK,CAAEA,KAAM,CACbgD,KAAK,CAAEA,KAAM,CACbtB,SAAS,CAAEA,SAAU,CACrBW,OAAO,CAAEA,OAAQ,CACjBY,SAAS,CAAEA,SAAU,CACrBb,gBAAgB,CAAEA,gBAAiB,CACnCF,YAAY,CAAEA,YAAa,EAPtBe,SAQN,CAAC,EACH,CAAC,CACO,CAAC,EACT,CAAC,CACA,CAAC,CAEb,CAAC,CAED,cAAe,CAAAtC,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/runner/work/challenges/challenges/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{useState,useEffect,useRef}from'react';import styled from'styled-components';import ToggleBtn from'./ToggleBtn';import drawBarChart from'../../utils/producing-chart/drawBarChart';import drawPieChart from'../../utils/producing-chart/drawPieChart';import drawOutline from'../../utils/producing-chart/drawOutline';import{SIZE}from'../../constants/producing-chart';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ControlBox=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 20px;\\n\"])));const Chart=_ref=>{let{data,setChartOpen}=_ref;const[mode,setMode]=useState('PIE');const animationId=useRef([0]);const toggleMode=()=>{setMode(prevMode=>{if(prevMode==='PIE')return'BAR';return'PIE';});};useEffect(()=>{const canvas=document.getElementById('chart');const ctx=canvas.getContext('2d');if(!(ctx instanceof CanvasRenderingContext2D))return;animationId.current.forEach(id=>{cancelAnimationFrame(id);});ctx.clearRect(0,0,SIZE.CANVAS.WIDTH,SIZE.CANVAS.HEIGHT);drawOutline(ctx);if(mode==='PIE'){drawPieChart(ctx,data,animationId);}else if(mode==='BAR'){drawBarChart(ctx,data,animationId);}},[mode,data]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(ControlBox,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setChartOpen(false),children:\"back\"}),/*#__PURE__*/_jsx(ToggleBtn,{mode:mode,onClick:toggleMode})]}),/*#__PURE__*/_jsx(\"canvas\",{id:\"chart\",width:SIZE.CANVAS.WIDTH,height:SIZE.CANVAS.HEIGHT})]});};export default Chart;","map":{"version":3,"names":["useState","useEffect","useRef","styled","ToggleBtn","drawBarChart","drawPieChart","drawOutline","SIZE","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ControlBox","div","_templateObject","_taggedTemplateLiteral","Chart","_ref","data","setChartOpen","mode","setMode","animationId","toggleMode","prevMode","canvas","document","getElementById","ctx","getContext","CanvasRenderingContext2D","current","forEach","id","cancelAnimationFrame","clearRect","CANVAS","WIDTH","HEIGHT","children","onClick","width","height"],"sources":["/home/runner/work/challenges/challenges/src/components/producing-chart/Chart.tsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { ChartDataType } from '../../components/producing-chart/ChartMaker';\nimport ToggleBtn from './ToggleBtn';\nimport drawBarChart from '../../utils/producing-chart/drawBarChart';\nimport drawPieChart from '../../utils/producing-chart/drawPieChart';\nimport drawOutline from '../../utils/producing-chart/drawOutline';\nimport { SIZE } from '../../constants/producing-chart';\n\nconst ControlBox = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n\nexport type ChartModeType = 'PIE' | 'BAR';\n\ninterface ChartType {\n  data: ChartDataType;\n  setChartOpen: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst Chart = ({ data, setChartOpen }: ChartType) => {\n  const [mode, setMode] = useState<ChartModeType>('PIE');\n  const animationId = useRef([0]);\n\n  const toggleMode = () => {\n    setMode((prevMode) => {\n      if (prevMode === 'PIE') return 'BAR';\n      return 'PIE';\n    });\n  };\n\n  useEffect(() => {\n    const canvas = document.getElementById('chart');\n    const ctx = (canvas as HTMLCanvasElement).getContext('2d');\n    if (!(ctx instanceof CanvasRenderingContext2D)) return;\n    animationId.current.forEach((id) => {\n      cancelAnimationFrame(id);\n    });\n    ctx.clearRect(0, 0, SIZE.CANVAS.WIDTH, SIZE.CANVAS.HEIGHT);\n    drawOutline(ctx);\n    if (mode === 'PIE') {\n      drawPieChart(ctx, data, animationId);\n    } else if (mode === 'BAR') {\n      drawBarChart(ctx, data, animationId);\n    }\n  }, [mode, data]);\n\n  return (\n    <>\n      <ControlBox>\n        <button onClick={() => setChartOpen(false)}>back</button>\n        <ToggleBtn mode={mode} onClick={toggleMode}></ToggleBtn>\n      </ControlBox>\n      <canvas id=\"chart\" width={SIZE.CANVAS.WIDTH} height={SIZE.CANVAS.HEIGHT}></canvas>\n    </>\n  );\n};\n\nexport default Chart;\n"],"mappings":"iKAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACnD,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAEtC,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,CAAAC,YAAY,KAAM,0CAA0C,CACnE,MAAO,CAAAC,YAAY,KAAM,0CAA0C,CACnE,MAAO,CAAAC,WAAW,KAAM,yCAAyC,CACjE,OAASC,IAAI,KAAQ,iCAAiC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEvD,KAAM,CAAAC,UAAU,CAAGZ,MAAM,CAACa,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,+GAK5B,CASD,KAAM,CAAAC,KAAK,CAAGC,IAAA,EAAuC,IAAtC,CAAEC,IAAI,CAAEC,YAAwB,CAAC,CAAAF,IAAA,CAC9C,KAAM,CAACG,IAAI,CAAEC,OAAO,CAAC,CAAGxB,QAAQ,CAAgB,KAAK,CAAC,CACtD,KAAM,CAAAyB,WAAW,CAAGvB,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAE/B,KAAM,CAAAwB,UAAU,CAAGA,CAAA,GAAM,CACvBF,OAAO,CAAEG,QAAQ,EAAK,CACpB,GAAIA,QAAQ,GAAK,KAAK,CAAE,MAAO,KAAK,CACpC,MAAO,KAAK,CACd,CAAC,CAAC,CACJ,CAAC,CAED1B,SAAS,CAAC,IAAM,CACd,KAAM,CAAA2B,MAAM,CAAGC,QAAQ,CAACC,cAAc,CAAC,OAAO,CAAC,CAC/C,KAAM,CAAAC,GAAG,CAAIH,MAAM,CAAuBI,UAAU,CAAC,IAAI,CAAC,CAC1D,GAAI,EAAED,GAAG,WAAY,CAAAE,wBAAwB,CAAC,CAAE,OAChDR,WAAW,CAACS,OAAO,CAACC,OAAO,CAAEC,EAAE,EAAK,CAClCC,oBAAoB,CAACD,EAAE,CAAC,CAC1B,CAAC,CAAC,CACFL,GAAG,CAACO,SAAS,CAAC,CAAC,CAAE,CAAC,CAAE9B,IAAI,CAAC+B,MAAM,CAACC,KAAK,CAAEhC,IAAI,CAAC+B,MAAM,CAACE,MAAM,CAAC,CAC1DlC,WAAW,CAACwB,GAAG,CAAC,CAChB,GAAIR,IAAI,GAAK,KAAK,CAAE,CAClBjB,YAAY,CAACyB,GAAG,CAAEV,IAAI,CAAEI,WAAW,CAAC,CACtC,CAAC,IAAM,IAAIF,IAAI,GAAK,KAAK,CAAE,CACzBlB,YAAY,CAAC0B,GAAG,CAAEV,IAAI,CAAEI,WAAW,CAAC,CACtC,CACF,CAAC,CAAE,CAACF,IAAI,CAAEF,IAAI,CAAC,CAAC,CAEhB,mBACET,KAAA,CAAAE,SAAA,EAAA4B,QAAA,eACE9B,KAAA,CAACG,UAAU,EAAA2B,QAAA,eACThC,IAAA,WAAQiC,OAAO,CAAEA,CAAA,GAAMrB,YAAY,CAAC,KAAK,CAAE,CAAAoB,QAAA,CAAC,MAAI,CAAQ,CAAC,cACzDhC,IAAA,CAACN,SAAS,EAACmB,IAAI,CAAEA,IAAK,CAACoB,OAAO,CAAEjB,UAAW,CAAY,CAAC,EAC9C,CAAC,cACbhB,IAAA,WAAQ0B,EAAE,CAAC,OAAO,CAACQ,KAAK,CAAEpC,IAAI,CAAC+B,MAAM,CAACC,KAAM,CAACK,MAAM,CAAErC,IAAI,CAAC+B,MAAM,CAACE,MAAO,CAAS,CAAC,EAClF,CAAC,CAEP,CAAC,CAED,cAAe,CAAAtB,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}